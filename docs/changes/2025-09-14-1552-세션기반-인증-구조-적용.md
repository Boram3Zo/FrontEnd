# 🔄 세션기반-인증-구조-적용

> **작업 유형**: 기능 변경/수정  
> **작업 날짜**: 2025-09-14  
> **담당자**: mjki

## 📋 작업 개요

### 문제 상황

백엔드가 JSON(@RequestBody) 방식으로 로그인을 받고, 성공 시 JSESSIONID 세션 쿠키를 발급하는 구조로 되어있음. 하지만 프론트엔드에서 세션 쿠키를 자동으로 포함하지 않아 세션 유지가 되지 않는 상황.

### 요구사항

- RESTful JSON 기반 인증 구조에 맞는 세션 관리
- JSESSIONID 쿠키 자동 포함으로 세션 유지
- 불필요한 localStorage 토큰 저장 방식 제거
- 로그아웃 기능 추가로 세션 완전 종료

## 🔧 변경 사항

### 수정된 파일

- `app/_libs/apiClient.ts` - credentials: 'include' 추가
- `app/_hooks/useLoginForm.ts` - localStorage 토큰 저장 제거, 세션 기반으로 변경
- `app/_libs/authService.ts` - logout 메서드 추가
- `scripts/test-session-login.mjs` - 세션 기반 로그인 테스트 스크립트 추가

### 주요 변경 내용

1. **ApiClient.request()**: 모든 API 요청에 `credentials: 'include'` 추가로 JSESSIONID 쿠키 자동 포함
2. **useLoginForm.handleSubmit()**: localStorage 토큰 저장 제거, 세션 쿠키 의존으로 변경
3. **AuthService.logout()**: 세션 종료를 위한 로그아웃 메서드 추가
4. **테스트 스크립트**: 세션 쿠키 동작 확인을 위한 통합 테스트 추가

### 코드 변경 예시

```typescript
// Before (기존 코드)
function oldFunction() {
	// 기존 로직
}

// After (수정된 코드)
function newFunction() {
	// 새로운 로직
}
```

## ✅ 개선 효과

### 사용자 경험 개선

- 개선된 사용자 경험 설명
- 더 나아진 기능이나 편의성

### 기술적 개선

- 성능 향상
- 코드 품질 개선
- 유지보수성 향상

## 🧪 테스트

### 테스트 시나리오

1. [테스트 케이스 1]
2. [테스트 케이스 2]
3. [테스트 케이스 3]

### 확인 사항

- [ ] 기능이 의도한 대로 동작하는가?
- [ ] 기존 기능에 영향이 없는가?
- [ ] 에러 처리가 적절한가?

## 📖 사용법

### 변경된 기능 사용 방법

```typescript
// 새로운 사용 방법
import { NewComponent } from "@/components/NewComponent";

function App() {
	return <NewComponent prop="value" />;
}
```

## 🔗 관련 링크

- 관련 이슈: #[이슈번호]
- PR 링크: #[PR번호]
- 참고 문서: [링크]

## 📝 비고

- 추가적인 주의사항이나 향후 개선 방향
